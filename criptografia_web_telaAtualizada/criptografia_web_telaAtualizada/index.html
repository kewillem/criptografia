<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Criptografia de Mensagens</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>

<body>
    <main id="container">
        <form id="login_form">
            <!-- FORM HEADER -->
            <div id="form_header">
                <h1>Conversor de binários</h1>
            </div>
            <h4>Converter texto para binários</h4>
            <!-- INPUTS -->
            <div class="inputs">
                <div class="input-box">
                    <label for="mensagem">
                        Digite aqui o texto que será convertido:
                        <div class="input-field">
                            <input type="text" id="mensagem" name="mensagem">
                        </div>
                    </label>
                </div>
            </div>
            <!-- LOGIN BUTTON -->
            <button type="button" class="btn btn-warning" id="buttonCriptografar">Converter</button>

            <div class="inputs">
                <div class="input-box">
                    <label for="criptografado">
                        Texto convertido:
                        <div class="input-field">
                            <input type="text" id="criptografado" name="criptografado">
                        </div>
                    </label>
                </div>
            </div>

            <h4>Converter binários para texto</h4>

            <div class="inputs">
                <div class="input-box">
                    <label for="criptografado">
                        Digite aqui um texto criptografado:
                        <div class="input-field">
                            <input type="text" id="InputCriptografado" name="criptografado">
                        </div>
                    </label>
                </div>
            </div>
            <button type="button" class="btn btn-warning" id="buttonDecriptografar">Converter</button>
            <div class="inputs">
                <div class="input-box">
                    <label for="mensagem">
                        Texto convertido:
                        <div class="input-field">
                            <input type="text" id="outputDecriptografado" name="mensagem">
                        </div>
                    </label>
                </div>
            </div>
        </form>
    </main>

    <script>
        const buttonCriptografar = document.querySelector("#buttonCriptografar")
        const buttonDecriptografar = document.querySelector("#buttonDecriptografar")

        buttonCriptografar.addEventListener('click', criptografar)
        buttonDecriptografar.addEventListener('click', descriptografar)
        function criptografar() {
            const outputMensagem = document.querySelector('#criptografado');
            const frase = document.querySelector('#mensagem').value;
            let fraseCriptografada = '';
            for (let i = 0; i < frase.length; i++) {
                fraseCriptografada += frase.charCodeAt(i).toString(2) + ' '; // Adiciona um espaço entre as representações binárias
            }
            outputMensagem.value = fraseCriptografada; // Remove o espaço extra no final da string
            console.log(fraseCriptografada);
        }
        function descriptografar() {
            const InputCriptografado = document.querySelector('#InputCriptografado');
            const outputDecriptografado = document.querySelector('#outputDecriptografado');
            let frase = '';
            const partes = InputCriptografado.value.split(' '); // Divide a string criptografada em partes separadas por espaços
            for (let i = 0; i < partes.length; i++) {
                const caractere = String.fromCharCode(parseInt(partes[i], 2)); // Converte a representação binária em um caractere
                frase += caractere;
            }
            outputDecriptografado.value = frase
            console.log(frase);
        }
    </script>
</body>

</html>